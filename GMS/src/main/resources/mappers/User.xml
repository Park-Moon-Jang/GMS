<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
  <mapper namespace="com.bit.app">
  
    <!-- 전체 목록 -->
<!--     <select id="boardlistAll" resultType="com.bit.app.vo.BoardVO"> -->
<!--         SELECT * FROM BOARD1 ORDER BY no desc, writedate desc -->
<!--     </select> -->

<!--    <insert id="join" parameterType="com.goods.app.vo.MemberVO" >
    INSERT INTO item_category (category_no, category_name) VALUES (#{category_no}, #{category_name})
   </insert> -->
   
   <select id="SelectItemDetal" resultType="com.goods.app.vo.ItemVO" parameterType="int">
	SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,
	t3.company_name,t1.price,t1.carry_Date, t2.category_no,
	t2.category_name
	FROM (select * from gms_pj.item where item.item_no = #{item_No}) t1
	inner JOIN
	(SELECT * from gms_pj.item_category) t2
	on t1.category_no = t2.category_no
	INNER JOIN
	(select * from gms_pj.manufacturer) t3
	on t1.company_no = t3.company_no
   </select>
   
   <select id="countSelectBtn8" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%") and item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
   </select>
   
   <select id="countSelectBtn7" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item where item.item_no like CONCAT("__",#{item_No},"%") and item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
   </select>
   
   <select id="countSelectBtn6" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item where item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
   </select>
   
   <select id="countSelectBtn5" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item where item.item_no like CONCAT("__",#{item_No},"%")) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
   </select>
   
   <select id="countSelectBtn4" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
   </select>
   <select id="countSelectBtn3" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%")) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
   </select>
   
   <select id="countSelectBtn2" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%")) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
   </select>
   
   <select id="countSelectBtn" resultType="int" parameterType="com.goods.app.vo.ItemVO">
		SELECT count(*)
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%") and item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
   </select>
   
   
   <select id="SelectBtn8" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
		<include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%") and item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   
   <select id="SelectBtn7" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
 	  <include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item where item.item_no like CONCAT("__",#{item_No},"%") and item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   
   <select id="SelectBtn6" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
   		<include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item where item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   
   <select id="SelectBtn5" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
   		<include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item where item.item_no like CONCAT("__",#{item_No},"%")) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   
   <select id="SelectBtn4" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
   		<include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   <select id="SelectBtn3" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
   		<include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%")) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   
   <select id="SelectBtn2" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
  		<include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%")) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   
   <select id="SelectBtn" resultType="com.goods.app.vo.ItemVO" parameterType="Map">
  		<include refid ="pagingStart"/>
		SELECT t1.item_no,t1.item_name,t1.amount,t1.company_no,t1.price,t1.carry_Date, t2.category_no, t2.category_name
		FROM (select * from gms_pj.item where item.item_no like CONCAT(#{item_No},"%") and item.item_no = 
		(select store.item_no from gms_pj.store where store_name = #{store_Name})) t1
		INNER JOIN 
		(SELECT * from gms_pj.item_category where item_category.category_no = #{category_No}) t2
		on t1.category_no = t2.category_no 
		<include refid ="pagingEnd"/>
   </select>
   <sql id ="pagingStart">
   select * from (
   </sql>
   <sql id ="pagingEnd">
   order by item_no
	) B
	limit 2 offset #{curPage}
   </sql>
   <select id="SelectStore" resultType="com.goods.app.vo.ItemVO">
   		SELECT STORE_NO, STORE_NAME FROM STORE
   </select>
    
   <select id="SelectCategory" resultType="com.goods.app.vo.ItemVO">
   		SELECT CATEGORY_NO, CATEGORY_NAME FROM ITEM_CATEGORY
   </select>
   
   <select id="SelectBrand" resultType="com.goods.app.vo.ItemVO">
   		SELECT COMPANY_NO, COMPANY_NAME FROM MANUFACTURER
   </select>
   
   <select id="checkUser"  resultType="com.goods.app.vo.UserVO">
   		SELECT USER_ID,USER_PW FROM USER WHERE USER_ID=#{user_id} and USER_PW=#{user_pw}
   </select>
	<insert id="joinUser">
		INSERT INTO USER VALUES (#{user_id},#{user_pw},#{user_nickname},#{user_name},#{user_phon},#{user_email},#{birth})
	</insert>
 </mapper>
